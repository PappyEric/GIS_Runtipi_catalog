{
    "services": [
        {
            "name": "nginx",
            "image": "geonode/nginx:4.2.0",
            "isMain": true,
            "internalPort": "80",
            "environment": {
                "RESOLVER": "127.0.0.11"
            },
            "depends_on": [
                "django",
                "geoserver"
            ]
        },
        {
            "name": "django",
            "image": "geonode/geonode:4.2.0",
            "environment": {
                "GEONODE_INSTANCE_NAME": "geonode",
                "GEONODE_LB_HOST_IP": "${GEONODE_LB_HOST_IP}",
                "GEONODE_LB_PORT": "80",
                "SITEURL": "http://${GEONODE_LB_HOST_IP}/",
                "DATABASE_URL": "postgis://${DB_USER}:${DB_PASSWORD}@${DB_HOST}:5432/geonode",
                "GEODATABASE_URL": "postgis://${DB_USER}:${DB_PASSWORD}@${DB_HOST}:5432/geonode_data",
                "GEOSERVER_WEB_UI_LOCATION": "http://geoserver:8080/geoserver/",
                "GEOSERVER_PUBLIC_LOCATION": "http://${GEONODE_LB_HOST_IP}/geoserver/",
                "BROKER_URL": "redis://redis:6379/1",
                "ADMIN_USERNAME": "admin",
                "ADMIN_PASSWORD": "${ADMIN_PASSWORD}",
                "ADMIN_EMAIL": "admin@example.com",
                "C_FORCE_ROOT": "True"
            },
            "depends_on": [
                "redis"
            ]
        },
        {
            "name": "geoserver",
            "image": "geonode/geoserver:2.23.0",
            "environment": {
                "GEONODE_LB_HOST_IP": "${GEONODE_LB_HOST_IP}",
                "GEONODE_LB_PORT": "80",
                "NGINX_BASE_URL": "http://${GEONODE_LB_HOST_IP}/"
            },
            "depends_on": [
                "django"
            ]
        },
        {
            "name": "redis",
            "image": "redis:7-alpine"
        },
        {
            "name": "celery",
            "image": "geonode/geonode:4.2.0",
            "command": "celery-cmd",
            "environment": {
                "DATABASE_URL": "postgis://${DB_USER}:${DB_PASSWORD}@${DB_HOST}:5432/geonode",
                "GEODATABASE_URL": "postgis://${DB_USER}:${DB_PASSWORD}@${DB_HOST}:5432/geonode_data",
                "BROKER_URL": "redis://redis:6379/1",
                "C_FORCE_ROOT": "True"
            },
            "depends_on": [
                "redis"
            ]
        }
    ]
}